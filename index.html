<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dapur Mba Ida</title>

<style>

body{
  margin:0;
  font-family:Arial, sans-serif;
  background:#fdf8f2;
}

/* HEADER */

header{
  background:url("images/bg.jpg") center/cover;
  padding:70px 20px;
  text-align:center;
}

header h1,
header p{
  color:#7a4a21;
  margin:5px;
}

/* CONTAINER */

.container{
  max-width:900px;
  margin:auto;
  padding:20px;
}

/* CATEGORY */

.category{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(150px,1fr));
  gap:15px;
}

.category button{
  padding:15px;
  background:#c58b50;
  color:white;
  border:none;
  border-radius:8px;
  font-size:16px;
  cursor:pointer;
}

.category button:hover{
  background:#a86d3a;
}

/* PAGE */

.page{
  display:none;
}

/* SLIDER */

.slider{
  position:relative;
  height:200px;
  overflow:hidden;
  border-radius:10px;
  margin-bottom:20px;
}

.slide{
  width:100%;
  height:100%;
  object-fit:cover;
  position:absolute;
  opacity:0;
  transition:1s;
}

.slide.active{
  opacity:1;
}

/* PRODUCT */

.product{
  border:1px solid #ddd;
  padding:15px;
  border-radius:10px;
  margin-bottom:15px;
  background:white;
}

.product img{
  width:100%;
  height:150px;
  object-fit:cover;
  border-radius:8px;
}

.product h3{
  margin:5px 0;
  color:#7a4a21;
}

/* INPUT */

input{
  width:60px;
  padding:5px;
}

/* CART */

.cart{
  background:white;
  padding:15px;
  border-radius:10px;
  margin-top:20px;
}

.cart-item{
  display:flex;
  justify-content:space-between;
  margin:5px 0;
}

.cart-item button{
  background:red;
  color:white;
  border:none;
  padding:2px 6px;
  border-radius:4px;
}

/* BUTTON */

.btn{
  background:#25d366;
  color:white;
  padding:15px;
  border:none;
  width:100%;
  border-radius:8px;
  font-size:18px;
  margin-top:10px;
  cursor:pointer;
}

.back{
  background:#888;
  padding:8px 15px;
  border:none;
  border-radius:5px;
  color:white;
  margin-bottom:15px;
}

</style>
</head>

<body>

<!-- HEADER -->

<header>
  <h1>Dapur Mba Ida</h1>
  <p>Catering Tradisional Jawa</p>
</header>

<div class="container">

<!-- HOME -->

<div id="home">

<h2>Pilih Kategori</h2>

<div class="category">

<button onclick="openPage('khitan')">Khitan</button>
<button onclick="openPage('tahlil')">Tahlilan</button>
<button onclick="openPage('nikah')">Pernikahan</button>
<button onclick="openPage('slametan')">Slametan</button>
<button onclick="openPage('kantor')">Arisan / Kantor</button>

</div>

</div>

<!-- PAGE TEMPLATE -->

<div id="khitan" class="page"></div>
<div id="tahlil" class="page"></div>
<div id="nikah" class="page"></div>
<div id="slametan" class="page"></div>
<div id="kantor" class="page"></div>

</div>

<script>

/* DATA */

const paket = [
 {nama:"Hemat",harga:15000,img:"images/hemat.jpg"},
 {nama:"Standar",harga:20000,img:"images/standar.jpg"},
 {nama:"Lengkap",harga:25000,img:"images/lengkap.jpg"}
];

const topping = [
 {nama:"Kotak Snack",harga:5000},
 {nama:"Air Mineral",harga:3000},
 {nama:"Buah Potong",harga:4000}
];

let cart=[];

/* OPEN PAGE */

function openPage(id){

 document.getElementById("home").style.display="none";

 document.querySelectorAll(".page").forEach(p=>{
   p.style.display="none";
 });

 const page=document.getElementById(id);

 page.innerHTML=generatePage(id);

 page.style.display="block";

 startSlider(id);
}

/* GENERATE PAGE */

function generatePage(id){

 let html=`

<button class="back" onclick="back()">‚Üê Kembali</button>

<div class="slider" id="slider-${id}">
  <img src="images/slide1.jpg" class="slide active">
  <img src="images/slide2.jpg" class="slide">
  <img src="images/slider3.jpg" class="slide">
</div>

<h2 style="color:#7a4a21">Paket ${id.toUpperCase()}</h2>

`;

paket.forEach(p=>{

html+=`

<div class="product">

<img src="images/hemat.jpg">

<h3>${p.nama}</h3>

<p>Rp ${p.harga.toLocaleString()}</p>

Qty: <input type="number" min="0" value="0"
onchange="add('${id}','${p.nama}',${p.harga},this.value)">

</div>

`;

});

/* TOPPING */

html+=`<h3>Toping Tambahan</h3>`;

topping.forEach(t=>{

html+=`

<div class="product">

<h4>${t.nama}</h4>
<p>Rp ${t.harga.toLocaleString()}</p>

Qty: <input type="number" min="0" value="0"
onchange="add('${id}','${t.nama}',${t.harga},this.value)">

</div>

`;

});

/* CART */

html+=`

<div class="cart">

<h3>üõí Keranjang</h3>

<div id="cart"></div>

<h4>Total: Rp <span id="total">0</span></h4>

<button class="btn" onclick="checkout()">Checkout WhatsApp</button>

</div>

`;

return html;
}

/* BACK */

function back(){
 document.getElementById("home").style.display="block";
 document.querySelectorAll(".page").forEach(p=>{
  p.style.display="none";
 });
}

/* ADD CART */

function add(cat,name,price,qty){

 qty=parseInt(qty);

 cart=cart.filter(i=>i.name!==name);

 if(qty>0){
  cart.push({
   cat,name,price,qty
  });
 }

 updateCart();
}

/* UPDATE CART */

function updateCart(){

 let html="";
 let total=0;

 cart.forEach((i,index)=>{

  let sub=i.price*i.qty;
  total+=sub;

  html+=`

<div class="cart-item">

${i.name} (${i.qty})

Rp ${sub.toLocaleString()}

<button onclick="remove(${index})">X</button>

</div>

`;

 });

 document.getElementById("cart").innerHTML=html;
 document.getElementById("total").innerText=total.toLocaleString();
}

/* REMOVE */

function remove(i){
 cart.splice(i,1);
 updateCart();
}

/* CHECKOUT */

function checkout(){

 if(cart.length==0){
  alert("Keranjang kosong");
  return;
 }

 let text="Halo Dapur Mba Ida,%0ASaya pesan:%0A";

 let total=0;

 cart.forEach(i=>{
  let sub=i.price*i.qty;
  total+=sub;

  text+=`- ${i.name} (${i.qty}) = Rp ${sub}%0A`;
 });

 text+=`%0ATotal: Rp ${total}%0A`;
 text+=`Nama:%0ANo HP:%0A`;

 window.open("https://wa.me/6285878278961?text="+text);
}

/* SLIDER */

function startSlider(id){

 let slides=document.querySelectorAll(`#slider-${id} .slide`);

 let i=0;

 setInterval(()=>{

  slides[i].classList.remove("active");

  i=(i+1)%slides.length;

  slides[i].classList.add("active");

 },3000);

}

</script>

</body>
</html>
